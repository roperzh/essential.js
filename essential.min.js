//     EssentialJS v0.5.0
//     Copyright (c)2014 Roberto Dip
//     Distributed under MIT license
//     http://roperzh.github.io/essential.js
window.Essential={rootElement:document,Core:{},start:function(t){this.loadBehaviors({application:t})},//     If no context is provided the default is `Essential.rootElement`
loadBehaviors:function(t){t.context=t.context||this.rootElement;var e=this.initializeBehaviors(t.application,t.context);this.launchBehaviors(e)},initializeBehaviors:function(t,e){var n=this.Core.crawl(e),r=Object.keys(n),i=[],o=-1;while(r[++o]){var a=r[o],s=this.Core.camelize(a),c=t[s];if(typeof c!=="undefined"){var l=n[a],u=-1;while(l[++u]){var h=c.new(l[u],true);i.push(h)}}}return i},launchBehaviors:function(t){var e=t.sort(this.Core.SortMethods.byPriority),n=-1;while(e[++n]){e[n].start()}}};if(!Object.getOwnPropertyDescriptors){Object.getOwnPropertyDescriptors=function(t){var e={};Object.getOwnPropertyNames(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)});return e}}var Proto={"new":function(){var t=Object.create(this);if(t.constructor){t.constructor.apply(t,arguments)}return t},extend:function(t){var e=Object.create(this,Object.getOwnPropertyDescriptors(t));e.super=this;return e}};Function.prototype.extend=function(t){var e=this;var n=Proto.extend.call(e.prototype,Proto);return n.extend(t)};function CustomEvent(t,e){e=e||{bubbles:false,cancelable:false,detail:undefined};var n=document.createEvent("CustomEvent");n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail);return n}CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent;Essential.Behavior=Proto.extend({constructor:function(t,e){this.el=t;if(!e){this.start()}},start:function(){this.delegateEvents();this.listenChannels();if(typeof this.init==="function"){this.init()}},delegateEvents:function(){Essential.Core.mapEvents.call(this,this.events,this.el)},listenChannels:function(){Essential.Core.mapEvents.call(this,this.channels,document)},//      this parameter can be ommited. Default value is `document`
//     defaults to true
//     defaults to false
//      event can be accesed later via `event.detail`
emit:function(t){t.context=t.context||this.el;t.data=t.data||{};t.bubbles=t.bubbles||true;t.cancelable=t.cancelable||false;var e=new CustomEvent(t.channel,{bubbles:t.bubbles,cancelable:t.cancelable,detail:t.data});t.context.dispatchEvent(e)},priority:0});//     name a valid CSS selector must be placed, for example `"click #element"`
Essential.Core.mapEvents=function(t,e){if(typeof t==="undefined"){return}var n=/^(\S+)\s*(.*)$/;for(var r in t){var i=t[r];var o=r.match(n);var a=o[1],s=o[2],c=s?e.querySelectorAll(s):[e];if(typeof this[i]==="undefined"){continue}Essential.Core.bind(a,c,this[i].bind(this))}};Essential.Core.bind=function(t,e,n){var r=-1;while(e[++r]){var i=e[r];if(i.addEventListener){e[r].addEventListener(t,n)}else{i.attachEvent("on"+t,n)}}};Essential.Core.SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g;Essential.Core.FIRST_LETTER_REGEXP=/^[a-z]/g;Essential.Core.camelize=function(t){return t.replace(Essential.Core.FIRST_LETTER_REGEXP,function(t){return t.toUpperCase()}).replace(Essential.Core.SPECIAL_CHARS_REGEXP,function(t,e,n){return n.toUpperCase()})};Essential.Core.crawl=function(t){var e=t.querySelectorAll("[data-behavior], [behavior]"),n=-1,r={};while(e[++n]){var i=e[n],o=i.getAttribute("data-behavior")||i.getAttribute("behavior"),a=o.split(" "),s=-1;while(a[++s]){var c=a[s];if(r[c]){r[c].push(i)}else{r[c]=[i]}}}return r};Essential.Core.SortMethods={byPriority:function(t,e){return e.priority-t.priority}};